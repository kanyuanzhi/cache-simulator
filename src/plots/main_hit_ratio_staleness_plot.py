import simpy
import random
import matplotlib as mpl
mpl.use('TkAgg')
import matplotlib.pyplot as plt
import numpy as np
from mcav.zipf import Zipf

if __name__ == "__main__":
    font1 = {
        'family': 'Arial',
        'size': 13,
    }

    font2 = {
        'family': 'Arial',
        'size': 10,
    }


    hit_ratio_model_reactive =[0.07673150985954438, 0.10035654311841317, 0.11855819447350699, 0.1318399321608723, 0.14167806848341122, 0.14918709379018552, 0.1550823389839167, 0.15982366374268553, 0.16371508800279627, 0.16696401492840568, 0.16971616514812335, 0.17207665517904025, 0.1741230950924539, 0.17591397119964336, 0.17749416160411396, 0.1788986580980016, 0.18015513573742908, 0.1812857638129275, 0.18230850615735406, 0.1832380706538583, 0.1840866132700362, 0.18486426740260622, 0.18557954697603174, 0.18623965700695322, 0.18685073545774022, 0.18741804345467028, 0.18794611627093397, 0.18843888418942192, 0.1888997700212584, 0.18933176837033966, 0.18973751050546345, 0.19011931779635133, 0.19047924599636318, 0.1908191221488173, 0.19114057551060268, 0.19144506359394856, 0.19173389420181838, 0.19200824415757567, 0.19226917529303267, 0.1925176481516756, 0.19275453377892263, 0.19298062390373438, 0.19319663976184237, 0.1934032397673014, 0.19360102620395958, 0.19379055107981238, 0.19397232126387526, 0.19414680300606665, 0.19431442592483927, 0.19447558653424526, 0.19463065137129154, 0.1947799597754769, 0.19492382636474107, 0.19506254324588335, 0.19519638199200953, 0.19532559541521233, 0.19545041915875144, 0.19557107312984442, 0.19568776279135439]

    hit_ratio_model_proactive_remove =[0.07673150985954438, 0.10035934425279101, 0.1195118679520145, 0.13571296176803407, 0.14981857479857227, 0.1623545846551367, 0.17366718269907758, 0.18330936488649968, 0.18616373245635368, 0.18815211642312205, 0.18967531620139833, 0.190892853576257, 0.1918933577638373, 0.19273239736740191, 0.19344731427962208, 0.19406440869651093, 0.19460286025061987, 0.19507704286339722, 0.1954979709664945, 0.19587424306269388, 0.19621267900454237, 0.19651876284560374, 0.19679695805895378, 0.19705093657901934, 0.19728374824044545, 0.19749794812312904, 0.19769569361807038, 0.19787881935458393, 0.19804889570262948, 0.19820727492761736, 0.1983551279511629, 0.19849347388616956, 0.19862320395804622, 0.19874510102390122, 0.19885985561020914, 0.19896807917504994, 0.19907031514139253, 0.19916704812790467, 0.19925871171263093, 0.19934569499534355, 0.199428348170486, 0.19950698728087743, 0.1995818982896314, 0.19965334058194362, 0.19972154998792463, 0.19978674140134023, 0.19984911105603817, 0.19990883851119332, 0.1999660883880332, 0.2000210118936215, 0.20007374816159754, 0.20012442543505488, 0.20017316211286693, 0.20022006767750428, 0.20026524351975147, 0.20030878367344268, 0.20035077547149446, 0.2003913001328948, 0.20043043328900892]

    hit_ratio_model_proactive_renew =[0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338, 0.20267248446764338]

    hit_ratio_model_proactive_optional_renew =[0.21730601703468763, 0.2233677735745738, 0.229238437363411, 0.23492838755449885, 0.24044727972603136, 0.24580410416359907, 0.24577572460231178, 0.22638584887654337, 0.22168744536472207, 0.21880528233692298, 0.21676560171964512, 0.2152198748110493, 0.21399788797067837, 0.21300293103159773, 0.2121747434927842, 0.21147332925747458, 0.21087088083373656, 0.210347359390257, 0.20988790419766648, 0.20948123159422846, 0.20911860260239268, 0.20879313361060697, 0.20849932247157912, 0.20823271448154093, 0.20798966182945638, 0.20776714706897828, 0.20756265140263294, 0.20737405493712824, 0.20719956013987742, 0.20703763239155373, 0.20688695331075874, 0.20674638374077878, 0.2066149341296122, 0.20649174062678588, 0.2063760456434861, 0.20626718192851853, 0.20616455943678558, 0.20606765443278127, 0.20597600039588215, 0.20588918038787585, 0.2058068206146602, 0.20572858496898783, 0.20565417038358919, 0.20558330285731985, 0.20551573404291398, 0.2054512383056797, 0.20538961017878585, 0.20533066215400161, 0.2052742227572608, 0.20522013486704646, 0.2051682542404957, 0.20511844821781816, 0.2050705945803651, 0.20502458054138292, 0.20498030185184146, 0.20493766200625407, 0.204896571535677, 0.20485694737689322, 0.20481871230836762]

    # hit_ratio_model_reactive = [hit_ratio_model_reactive[i] for i in range(0, len(hit_ratio_model_reactive), 2)]
    # hit_ratio_model_proactive_remove = [hit_ratio_model_proactive_remove[i] for i in range(0, len(hit_ratio_model_proactive_remove), 2)]
    #
    # hit_ratio_model_proactive_renew = [hit_ratio_model_proactive_renew[i] for i in range(0, len(hit_ratio_model_proactive_renew), 2)]
    # hit_ratio_model_proactive_optional_renew = [hit_ratio_model_proactive_optional_renew[i] for i in range(0, len(hit_ratio_model_proactive_optional_renew), 2)]


    # hit_ratio_sim_reactive =
    # hit_ratio_sim_proactive_remove =
    # hit_ratio_sim_proactive_renew =
    hit_ratio_sim_proactive_optional_renew =[0.21773086122609994, 0.22977018490984025, 0.23907853843343527, 0.22551483420593368, 0.22243658485252407]


    index_model = [i+2 for i in range(len(hit_ratio_model_proactive_optional_renew))]
    index_sim = [i*2+2 for i in range(len(hit_ratio_sim_proactive_optional_renew))]
    plt.plot(index_sim, hit_ratio_sim_proactive_optional_renew, "1", color="black", label="sim: proactive invalidation optional renewing")
    # plt.plot(index_sim, hit_ratio_sim_proactive_renew, "2", color="black", label="sim: proactive invalidation with renewing")
    # plt.plot(index_sim, hit_ratio_sim_proactive_remove, "x", color="black", label="sim: proactive invalidation with removing")
    # plt.plot(index_sim, hit_ratio_sim_reactive, "+", color="black", label="sim: reactive invalidation")
    plt.plot(index_model, hit_ratio_model_proactive_optional_renew,"--", color="black", linewidth="1", label="model: proactive optional renewing")
    plt.plot(index_model, hit_ratio_model_proactive_renew,"-", color="black", linewidth="1", label="model: proactive renewing")
    plt.plot(index_model, hit_ratio_model_proactive_remove,":", color="black", linewidth="1", label="model: proactive removing")
    plt.plot(index_model, hit_ratio_model_reactive, "-.", color="black", linewidth="1", label="model: reactive")


    # plt.plot(index, hit_ratio_model_uniform, label="model-uniform")
    # plt.plot(index, hit_ratio_model_exponential, label="model-exponential")

    plt.xlabel("mean staleness time", font1)
    plt.ylabel("hit probability", font1)
    plt.grid(True)
    # plt.axis([2, 42, 0.09, 0.15], font1)
    my_x_ticks = np.arange(0, 63, 10 )
    my_y_ticks = np.arange(0.05, 0.26, 0.025)
    plt.xticks(my_x_ticks)
    plt.yticks(my_y_ticks)
    plt.legend(prop=font2)
    # plt.savefig("kan6.eps")
    plt.show()

